<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta name="generator" content="Fog Creek CityDesk 2.0.19" />
<meta name="citydesk" content="852BB11B/6" />
<title>JRobin :: RRDTool Choice for the Java World :: Welcome to JRobin</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="jrobin,java,api,rrdtool,rrd,round,robin,database,round robin database,mrtg">
<link rel="stylesheet" href="css/jrobin.css" type="text/css">
</head>

<body bgcolor="#ffffcc" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<!-- primary navigation -->

<table cellspacing="0" cellpadding="0" width="800" bgcolor="#FFFFCC" border="0">
<tbody>
<tr>
<td class="logo" colspan="7"><a href="index.html"><img height="78" alt="JRobin Logo" src="images/web-logo-2.png" width="800" border="0" /></a></td>
</tr>
<tr>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="16%">
<div align="center"><a class="toplink" href="index.html">HOME</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="library/index.html">Library</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="api/index.html">JRobin API</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="utilities/index.html">Utilities</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="support/index.html">Support</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="about/index.html">About Us</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="http://www.jrobin.org/phpBB2/" target="forum">Forum</a></div>
</td>
</tr>

<!-- secondary navigation -->

<tr>
<td class="leftcolumn" valign="top" align="center" height="1200" colspan="1">
<table cellpadding="1" width="100%" border="0"><tbody>

<tr><td class="left2">
<div align="left"><a class="left" href="index.html">Welcome to JRobin</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="news.html">JRobin 1.4.0 released!</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="download.html">Download JRobin</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="demo.html">Live demo</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="gallery.html">Gallery</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="license.html">License</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="sitemap.html">Site map</a></div>
</td></tr>

</tbody></table>
<p>&nbsp;</p>

<!-- external links -->

<!-- BYTEMARK -->

<p><a href="http://www.bytemark-hosting.co.uk/r/jrobin" alt="Bytemark Hosting"><img src="images/misc/bytemark.png" width="120" height="142" border="0" /></a></p>

<!-- SourceForge logo -->

<p align="center">
<a href="http://sourceforge.net" target="sf"><img height="31" alt="SourceForge.net Logo" src="http://sourceforge.net/sflogo.php?group_id=82668&amp;type=1" width="88" border="0" /></a>&nbsp;
</p>

<!-- Firefox -->

<p align="center">
<a title="Get Firefox - Web Browsing Redefined" href="http://www.mozilla.org/products/firefox/" target="firefox"><img height="15" alt="Get Firefox" src="http://www.mozilla.org/products/firefox/buttons/firefox_80x15.png" width="80" border="0" /></a>
</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</td>

<!-- CONTENT -->

<td class="rightcolumn" valign="top" colspan="6">
<h1>Welcome to JRobin</h1>
<a id="top" name="top"></a>

<!-- OPTIONAL SIDEBAR -->

 
<table class="sidebar" cellspacing="0" cellpadding="5" width="150" align="right">
<tbody>
<tr>
<td bgcolor="#663333">
<p align="left"><b><font color="white"><strong></strong>JRobin 1.4.0 is available!</font></b></p>
</td>
</tr>
<tr>
<td>
<p>We strongly recommend that you upgrade from version(s) 1.3.x to 1.4.0. There are many new interesting features you probably don't want to miss. Read more about the new release <a href="news.html">here</a>.</p>
<p>If not sure what JRobin can do for you, check the <a href="gallery.html">gallery page</a> first - all the graphs you will find there are made with JRobin.</p>
<p>It's easy to switch from RRDTool to JRobin, just check our <a href="api/quickreference.html">quick reference page</a>.</p>
<p>Novice RRD users should not skip this&nbsp;<a href="api/tutorial.html">fine RRD tutorial</a>.</p>
<p><a href="mailto:saxon@eunet.yu">Send</a> your JRobin graph, it will appear on our <a href="gallery.html">gallery page</a>!</p>
</td>
</tr>
</tbody>
</table>


<!-- body text -->

<p><img height="262" alt="sample graph" src="images/misc/simplegraph.png" width="497" border="0" /><br />
<em>Sample graph created with JRobin. See more graphs on the <a href="gallery.html">gallery page</a>.</em></p>
<h2>First time here?</h2>
<?xml:namespace prefix = cd /?>
<p>JRobin is a 100% pure java implementation of <a href="http://www.rrdtool.org">RRDTool's</a> functionality. It follows the <strong>same logic </strong> and uses the <strong>same data sources, archive types and definitions </strong> as RRDTool does. JRobin supports all standard operations on Round Robin Database (RRD) files: <strong>CREATE</strong>, <strong>UPDATE</strong>, <strong>FETCH</strong>, <strong>LAST</strong>, <strong>DUMP, XPORT</strong> &nbsp;and <strong>GRAPH</strong>.<strong> </strong> JRobin's API is made for those who are familiar with RRDTool's concepts and logic, but prefer to work with pure java. <strong>If you provide the same data to RRDTool and JRobin, you will get exactly the same results and graphs</strong>. JRobin is made from the scratch and it uses very limited portions of RRDTool's original source code. JRobin does not use native functions and libraries, has no <em>Runtime.exec()</em> calls and does not require RRDTool to be present.&nbsp;JRobin is distributed as a software library (<em>jar</em> files) and comes with full java source code (<a href="license.html">LGPL licence</a>). 
</p>
<p></p>
<p>You will not understand a single thing here if you are not already familiar with RRDTool. Basic concepts and terms (such as: <em>datasource, archive, datasource type, consolidation functions, archive steps/rows, heartbeat, RRD step, RPN, graph DEFs and CDEFs</em>) are not explained here because they have exactly the same meaning in JRobin and RRDTool. If you are a novice RRDTool/JRobin user, this annotated <a href="api/tutorial.html">RRDTool tutorial</a> is a good place to start.</p>
<h2>Why JRobin?<a id="into" name="into"></a></h2>
<p>Nothing can be compared with RRDTool. Period. Tobi Oetiker did such an excellent work that any attempt to write something similar to RRDTool will probably look pathetic.</p>
<p>Several years ago I used RRDTool for Internet traffic monitoring in a complex, commercial project. Front-end application (data sampling and validation) was written in Java, but RRDTool did all the hard work. No doubt that RRDTool is a wonderful and very useful tool especially for those inclined to pure C/C++ or scripting languages like Perl or PHP, but I am a Java addict since I discovered this superior programming language. Java does not prohibit usage of external tools, scripts and native libraries but such practice breaks the basic Java motto ("code once, run everywhere") and should be avoided whenever possible. Having finished some swift researches I was astonished that nobody tried to implement the same concept in pure Java. Even <a href="http://www.opennms.org">OpenNMS</a>, excellent Java application for network monitoring used its own JNI library as a wrapper around RRDTool. And something that uses JNI will never become something that is easily portable - we are talking about different world here.</p>
<p>RRDTool raises some issues if you try to use it with Java. RRDTool is written in good old C, and at the present moment there is no complete, official, and bullet-proof Java interface to RRDTool functions. You have only several options:</p>
<ul>
<li>To spawn RRDTool commands as external processes, through <em>Runtime.exec</em>() calls. I don't like it, because - it's not pure Java, and it's slow. Your application will have to carry the source code of RRDTool everywhere around and it has to be recompiled for different platforms. I used this approach in several of my applications and managed to crash Sun's JVM from time to time, usually under heavy loads (<em>"an error has happened outside of JVM", </em> that's all you'll get from dying JVM)
</li>
<li>To use some native Java library as a wrapper for RRDTool functions. This approach is much faster than ordinary <em>Runtime.exec</em>() call.You could try my <a href="http://www.dnseurope.net/opensource/rrdjtool/">RRDJTool library</a> or the library bundled with OpenNMS, but it's still not pure Java. And you will have a growing headache whenever your native library has to be moved from one platform to another.
</li>
</ul>
<p>
To make things even worse, <em>Runtime.exec()</em> is probably the weakest and the most complicated part of the entire J2SE. It just looks simple, but to use it properly you'll have to read javadoc very carefully. It's surprisingly easy to write java code with <em>Runtime.exec()</em> which works well on Windows or Solaris, but crashes or blocks JVM on Linux. There are several excellent articles on the Web to help you with this issue, and <a href="http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html">this one</a> is probably mandatory. But, sooner or later you'll end with a conclusion that support for external
processes
in Java is unnecessarily <a href="http://c2.com/cgi/wiki?JavaExecIsaTotalMess">complicated</a> and somewhat unnatural.</p>
<p>
I choose deliberately to look pathetic, but I could not resist to create&nbsp;a complete, pure Java replacement for RRDTool. So, JRobin is here. I'll try to make my point here:</p>
<ul>
<li>JRobin is a <strong>free software library</strong> (API) for RRD files management and graphing.
JRobin is not a set of command line utilities like RRDTool.
</li>
<li>It comes with <strong>full source code</strong> (100% pure Java).
</li>
<li>JRobin guarantees the following: <strong>If you perform the same sequence of RRD <em>create</em>, <em>update</em> and <em>fetch </em> operations using RRDTool and JRobin API, you will get exactly the same results. </strong> Without this feature, JRobin would be pointless. However, we deliberately introduced some <a href="api/jrobinandrrdtoolcompared.html#diff">minor differences</a> in data processing between JRobin and RRDTool. We believe that in some rare special cases JRobin should have more processing power than RRDTool.
</li>
<li>JRobin supports <strong>exactly the same data source types</strong> (COUNTER, ABSOLUTE, DERIVE, GAUGE) <strong>and consolidation functions</strong> (AVERAGE, MIN, MAX, LAST) as RRDTool does.
</li>
<li>JRobin API is written to be <strong>fully compatible</strong> with the syntax and logic of key RRDTool commands (update, fetch, graph). If you are familiar with RRDTool and Java, you will have no problem to use JRobin API&nbsp;to manipulate RRD files.
</li>
<li>JRobin is <strong>made from the scratch</strong>. JRobin is not a port of RRDTool's C source code to Java. In fact, RRDTool source code is used in JRobin in very small doses (for example, for rollover detection with COUNTER data types, but even Tobi borrowed that part of the code from someone else ;)
</li>
<li>JRobin files have <strong>fixed sizes</strong>, as RRDTool files. However, JRobin uses its own binary file format: you cannot use JRobin API to manage RRDTool files and vice versa.
</li>
<li><strong>JRobin RRD files are portable, RRDTool files are not</strong>. Try to copy a RRDTool file from Linux to Windows platform and fetch data from it. It does not work! But with JRobin you are free to create your RRD files on Solaris and transfer them to Windows or Linux platform for further processing.
&nbsp;It works! That is why I had to define my own file format which is different from the format used in RRDTool - there is no point in creating portable Java application backed by non-portable data files.&nbsp;
</li>
<li>JRobin uses the <strong>same XML format</strong> for RRD dump as RRDTool. You can dump your JRobin file to an XML file which can be imported by RRDTool. And vice versa.
</li>
<li>
RRDTool is such a great tool because of its 'scripting' capabilities: graph and database definitions could be easily isolated from the source code. When you want to change the look of your RRDTool graphs, you don't have to recompile the whole source. This issue was a week point of JRobin prior to 1.3.0 version. At the present moment it is possible to create JRobin RRD files and graphs starting from external <a href="api/templatesapi.html">XML template</a> files. You change the template, not the source code when you want to change creation parameters of your RRD files and graphs.
</li>
<li>Prior to version 1.2.0, JRobin graphing capabilities were made on top of <a href="http://www.jfree.org/jfreechart/index.html">JFreeChart</a> (excellent free open-source Java chart library). When <strong>Arne Vandamme</strong> joined me as a developer, he decided to rewrite the graphing portion of JRobin from the scratch. Eventually, he made JFreeChart obsolete. <strong>At the present moment, JRobin is a standalone Java library&nbsp;</strong>which supports DEF, CDEF, GPRINT, COMMENT and other important graph directives found in RRDTool's graph command (even RPN extensions). Thanks to Arne, JRobin graphs now have almost the same look&amp;feel like RRDTool graphs. To be honest, RRDTool is still a little more flexible, but just a little :) We plan to add more functionality and power to the graph.* package of JRobin later but right now, we like it the way it is - it suits even complex everyday tasks we&nbsp;used to handle with RRDTool.&nbsp;
&nbsp;
</li>
</ul>
<h2>Performance issues</h2>
<p>It would be quite unfair to compare JRobin and RRDTool when it comes to benchmarks. RRDTool is written in C and you should not be surprised that C-code runs considerably faster than its Java counterpart. Things will get even worse if you try to use JRobin in the most obvious but also the slowest way.&nbsp;<!--StartFragment --></p>

<p>For example, here is the code to update the same RRD file 10.000 times in a row. It's really slow. It takes some 50 seconds (on my poor computer) to do the job on a RRD file with two datasources (named 'input' and 'output'), four AVERAGE and four MAX archives defined:</p>
<pre>
// version (1)
String rrdPath = ... ;
long timestamp = ... ;
for(int i = 0; i &lt; 10000; i++) {
    <font color="#FF0000">RrdDb rrd = new RrdDb(rrdPath);</font>
    Sample sample = rrd.createSample(timestamp);
    sample.setValue("input", ...);
    sample.setValue("output", ...);
    sample.update();
    <font color="#FF0000">rrd.close();</font>
    timestamp += ... ;
}
</pre>
<p>The following (slightly modified) code executes the same number of updates <strong>ten times faster</strong>, in just 5 seconds (it's faster because RRD file is open only once, in front of the <code>for</code> loop):</p>
<pre>
// version (2)
String rrdPath = ... ;
long timestamp = ... ;
<font color="#FF0000">RrdDb rrd = new RrdDb(rrdPath);</font>
for(int i = 0; i &lt; 10000; i++) {
    Sample sample = rrd.createSample(timestamp);
    sample.setValue("input", ...);
    sample.setValue("output", ...);
    sample.update();
    timestamp += ... ;
}
<font color="#FF0000">rrd.close();</font>
</pre>
<p>The code above is much, much faster, but in real-world applications you'll have to maintain a list of references to open RRD files somehow. This could be complicated if you work with multiple threads and dozens of RRD files at the same time. <code>RrdDbPool</code> class resolves this issue - you can follow the simplest possible logic (like in the first example), but now with a decent benchmark time:</p>
<pre>
// version(3)
<font color="#FF0000">RrdDbPool pool = RrdDbPool.getInstance();</font>
String rrdPath = ... ;
long timestamp = ... ;
for(int i = 0; i &lt; 10000; i++) {
    <font color="#FF0000">RrdDb rrd = pool.requestRrdDb(rrdPath);</font>
    Sample sample = rrd.createSample(timestamp);
    sample.setValue("input", ...);
    sample.setValue("output", ...);
    sample.update();
    <font color="#FF0000">pool.release(rrd);</font>
    timestamp += ... ;
}
</pre>
<p>Version (3) is slightly slower than (2): it takes one extra seconds (6 in total) to do the job, but it gives you freedom to ask for a RRD file reference whenever necessary without seriously affecting the performance of your application. The pool will open the underlying RRD file when needed and if several threads request the same RRD file at the same time - the same reference will be returned.</p>
<h2>JRobin logo</h2>
<p>
If you happily used JRobin in one of your (non)commercial projects,
it would be nice to place the following logo with a link to <a href="http://www.jrobin.org">http://www.jrobin.org</a> on your web site:</p>
<p align="center">
<a href="http://www.jrobin.org"><img height="27" alt="small logo" src="images/web-logo-small.png" width="85" border="0" /></a></p>
<p>
It will help JRobin to gather even more attention from Java developers. However, this is not mandatory. Find other ways to support JRobin on <a href="about/index.html">developer's page</a>.</p>

<!-- footer -->

<p><a href="#">Back to the top</a></p>
<p>Copyright &copy; 2003, 2004 Sasa Markovic & Arne Vandamme. All Rights Reserved.</p>
<p><a href="http://www.bytemark-hosting.co.uk/r/jrobin" alt="Bytemark Hosting"><img src="images/misc/bytemark-transparent.gif" width="200" height="25" border="0"></a></p>
</td>
</tr>
</tbody>
</table>
</body>
</html>