<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta name="generator" content="Fog Creek CityDesk 2.0.19" />
<meta name="citydesk" content="852BB11B/32" />
<title>JRobin :: RRDTool Choice for the Java World :: Quick reference</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="jrobin,java,api,rrdtool,rrd,round,robin,database,round robin database,mrtg">
<link rel="stylesheet" href="../css/jrobin.css" type="text/css">
</head>

<body bgcolor="#ffffcc" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<!-- primary navigation -->

<table cellspacing="0" cellpadding="0" width="800" bgcolor="#FFFFCC" border="0">
<tbody>
<tr>
<td class="logo" colspan="7"><a href="../index.html"><img height="78" alt="JRobin Logo" src="../images/web-logo-2.png" width="800" border="0" /></a></td>
</tr>
<tr>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="16%">
<div align="center"><a class="toplink" href="../index.html">HOME</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="../library/index.html">Library</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="index.html">JRobin API</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="../utilities/index.html">Utilities</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="../support/index.html">Support</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="../about/index.html">About Us</a></div>
</td>
<td class="top" onmouseover="this.className='tophover'" onmouseout="this.className='top'" width="14%">
<div align="center"><a class="toplink" href="http://www.jrobin.org/phpBB2/" target="forum">Forum</a></div>
</td>
</tr>

<!-- secondary navigation -->

<tr>
<td class="leftcolumn" valign="top" align="center" height="1200" colspan="1">
<table cellpadding="1" width="100%" border="0"><tbody>

<tr><td class="left2">
<div align="left"><a class="left" href="index.html">JRobin API</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="jrobinandrrdtoolcompared.html">JRobin and RRDTool, compared</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="quickreference.html">Quick reference</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="tutorial.html">Tutorial</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="workingexample.html">Working example</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="coreapi.html">Core API</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="graphingapi.html">Graphing API</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="templatesapi.html">Templates API</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="standalonegraphingengine.html">Standalone graphing engine</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="backends.html">Backends</a></div>
</td></tr>

<tr><td class="left2">
<div align="left"><a class="left" href="javadoc.html">Javadoc</a></div>
</td></tr>

</tbody></table>
<p>&nbsp;</p>

<!-- external links -->

<!-- BYTEMARK -->

<p><a href="http://www.bytemark-hosting.co.uk/r/jrobin" alt="Bytemark Hosting"><img src="../images/misc/bytemark.png" width="120" height="142" border="0" /></a></p>

<!-- SourceForge logo -->

<p align="center">
<a href="http://sourceforge.net" target="sf"><img height="31" alt="SourceForge.net Logo" src="http://sourceforge.net/sflogo.php?group_id=82668&amp;type=1" width="88" border="0" /></a>&nbsp;
</p>

<!-- Firefox -->

<p align="center">
<a title="Get Firefox - Web Browsing Redefined" href="http://www.mozilla.org/products/firefox/" target="firefox"><img height="15" alt="Get Firefox" src="http://www.mozilla.org/products/firefox/buttons/firefox_80x15.png" width="80" border="0" /></a>
</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</td>

<!-- CONTENT -->

<td class="rightcolumn" valign="top" colspan="6">
<h1>Quick reference</h1>
<a id="top" name="top"></a>

<!-- OPTIONAL SIDEBAR -->



<!-- body text -->

<p>Here is the list of some most commonly used RRDTool commands and command line switches with a proper translation to Java (JRobin API). It's quite straightforward:</p>

<table bordercolor="#660000" cellspacing="0" cellpadding="3" border="1">
  <tbody>
<tr> 
    <td bgcolor="#660000"><p><strong><font color="#FFFFFF">RRDTool command...</font></strong></p></td>
    <td bgcolor="#660000"><p><strong><font color="#FFFFFF">...in JRobin API</font></strong></p></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><strong>CREATE</strong></p></td>
  </tr><tr bordercolor="#990000"> 
    <td><code> rrdtool create test.rrd </code></td>
    <td><code>RrdDef rrdDef = new RrdDef("test.rrd");</code></td>
  </tr>
  <tr> 
    <td><code>--start 1000111222</code></td>
    <td><code>rrdDef.setStartTime(1000111222L);</code></td>
  </tr>
  <tr> 
    <td><code>--step 300</code></td>
    <td><code>rrdDef.setStep(300);</code></td>
  </tr>
  <tr> 
    <td height="22"><code>DS:input:COUNTER:600:0:U</code></td>
    <td height="22"><code>rrdDef.addDatasource("input", "COUNTER", 
      600, 0, Double.NaN);</code></td>
  </tr>
  <tr> 
    <td><code>RRA:AVERAGE:0.5:6:700</code></td>
    <td><code>rrdDef.addArchive("AVERAGE", 0.5, 6, 700)</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>RrdDb rrdDb = new RrdDb(rrdDef);</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><strong>UPDATE</strong></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool update test.rrd</code></td>
    <td><code>RrdDb rrdDb = new RrdDb("test.rrd");<br />
      Sample sample = rrdDb.createSample();</code></td>
  </tr>
  <tr> 
    <td><code>1000111222:23.45:U</code></td>
    <td><code>sample.setTime(1000111222L);<br />
      sample.setValue(0, 23.45);<br />
      sample.setValue(1, Double.NaN);</code></td>
  </tr>
  <tr> 
    <td><code>-t input:output <br />
      1000111222:12.345:U</code></td>
    <td><code>sample.setTime(1000111222L);<br />
      sample.setValue("input", 12.345);<br />
      sample.setValue("output", Double.NaN);</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>sample.update();</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><b>LAST</b></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool last test.rrd</code></td>
    <td><code>RrdDb rrdDb = new RrdDb("test.rrd");</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>long lastUpdateTime = rrdDb.getLastUpdateTime();</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2"><p><b>FETCH</b></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool fetch test.rrd</code></td>
    <td><code>RrdDb rrdDb = new RrdDb("test.rrd");</code></td>
  </tr>
  <tr> 
    <td> <code>AVERAGE<br />
      --start 1000111222 <br />
      --end 1000222333 </code> </td>
    <td><code>FetchRequest req = rrdDb.createFetchRequest("AVERAGE",<br />
      1000111222L, 1000222333L);</code></td>
  </tr>
  <tr> 
    <td height="77"><code>AVERAGE<br />
      --start 1000111222 <br />
      --end 1000222333 <br />
      --resolution 600</code></td>
    <td height="77"><code>FetchRequest req = rrdDb.createFetchRequest("AVERAGE",<br />
      1000111222L, 1000222333L, 600);</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>FetchData fetchData = req.fetchData();</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><b>DUMP</b></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool dump <br />
      test.rrd &gt; test.xml</code></td>
    <td><code>RrdDb rrdDb = new RrdRb("test.rrd");</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>rrdDb.dumpXml("test.xml");</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><b>RESTORE</b></p></td>
  </tr>
  <tr> 
    <td> 
      <p><code>rrdtool restore <br />
        new.rrd old.xml<br />
        [Enter] </code></p>
    </td>
    <td><code>RrdDb rrdDb = new RrdDb("new.rrd" "old.xml");</code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><b>GRAPH</b></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool graph <br />
      traffic.png</code></td>
    <td><code>RrdGraphDef def = new RrdGraphDef();<font color="#FF0000"><br />
      </font>String pngFile = "traffic.png";<font color="#FF0000"> </font></code></td>
  </tr>
  <tr> 
    <td><code> --start 1000111222 <br />
      --end 1000222333</code></td>
    <td> <code>def.setTimePeriod(1000111222L, 1000222333L);</code> </td>
  </tr>
  <tr> 
    <td><code> --start "10/25/2003" <br />
      --end "10/28/2003"</code></td>
    <td> 
      <p><code>def.setTimePeriod(Util.getTimestamp(2003, 9, 25), <br />
        Util.getTimestamp(2003, 9, 28));<font color="#FF0000"><b>*</b></font></code></p>
    </td>
  </tr>
  <tr> 
    <td><code>-w 400 -h 200</code></td>
    <td><code>int pngWidth = 400, pngHeight = 200;</code></td>
  </tr>
  <tr> 
    <td><code>-v "this is y-axis"</code></td>
    <td><code>def.setVerticalLabel("this is y-axis");</code></td>
  </tr>
  <tr> 
    <td><code>-t "this is graph title"</code></td>
    <td><code>def.setTitle("this is graph title");</code></td>
  </tr>
  <tr> 
    <td> 
      <p><code>--lower-limit 1000.0<br />
        --upper-limit 2000.0<br />
        --rigid</code></p>
    </td>
    <td><code>def.setGridRange(1000.0, 2000.0, true);</code></td>
  </tr>
  <tr> 
    <td><code>--background <i>image_path</i></code></td>
    <td><code>def.setBackground("<i>image_path</i>");</code></td>
  </tr>
  <tr>
    <td><code>--color BACK#FF0080</code></td>
    <td><code>def.setBackColor(new Color(0xFF, 0x00, 0x80));</code></td>
  </tr>
  <tr>
    <td><code>--color CANVAS#FF0080</code></td>
    <td><code>def.setCanvasColor(new Color(0xFF, 0x00, 0x80));</code></td>
  </tr>
  <tr> 
    <td><code>--base 1024</code></td>
    <td><code>def.setBaseValue(1024);</code></td>
  </tr>
  <tr> 
    <td><code>--units-exponent 6</code></td>
    <td><code>def.setUnitsExponent(6);</code></td>
  </tr>
  <tr> 
    <td><code>--no-legend</code></td>
    <td><code>def.setShowLegend(false);</code></td>
  </tr>
  <tr> 
    <td><code>DEF:in=traffic.rrd:input:AVERAGE</code></td>
    <td><code>def.datasource("in", "traffic.rrd", "input", 
      "AVERAGE"); </code></td>
  </tr>
  <tr> 
    <td><code>CDEF:in1=in,8,*</code></td>
    <td><code>def.datasource("in1", "in,8,*");</code></td>
  </tr>
  <tr> 
    <td><code>CDEF:in2=<i>rpn_expression</i></code></td>
    <td><code>def.datasource("in2", "<i>rpn_expression</i>");</code></td>
  </tr>
  <tr> 
    <td><code>LINE1:in#0000FF:"input"</code></td>
    <td><code>def.line("in", new Color(0, 0, 0xFF), "input");</code></td>
  </tr>
  <tr> 
    <td><code>AREA:in1#00FF00:"input 1"</code></td>
    <td><code>def.area("in1", new Color(0, 0xFF, 0), "input 1");</code></td>
  </tr>
  <tr> 
    <td><code>STACK:in2#FFFF00:"input 2\r"</code></td>
    <td><code>def.stack("in2", new Color(0xFF, 0xFF, 0), "input 
      2@r");</code></td>
  </tr>
  <tr> 
    <td> <code>COMMENT:"This is a comment"</code> </td>
    <td><code>def.comment("This is a comment");</code></td>
  </tr>
  <tr> 
    <td><code>GPRINT:in:AVERAGE:<br />
      "avg=%.2lf %sbits/sec" </code></td>
    <td><code>def.gprint("in", "AVERAGE", "avg=@2 @sbits/sec");</code></td>
  </tr>
  <tr> 
    <td><code>GPRINT:in1:MAX:<br />
      "avg1=%5.2lf %Sbits/sec\r" </code></td>
    <td><code>def.gprint("in1", "MAX", "avg1=@5.2 @Sbits/sec@r);</code></td>
  </tr>
  <tr> 
    <td><code>[Enter]</code></td>
    <td><code>RrdGraph g = new RrdGraph(def);<br />
      g.saveAsPNG(pngFile, pngWidth, pngHeight);<font color="#FF0000"><b>*</b></font><font color="#FF0000"><b>*</b></font></code></td>
  </tr>
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><strong>XPORT</strong></p></td>
  </tr>
  <tr>
  	<td><code>rrdtool xport<br /> --start 1000111222<br />
      --end 1000222333</code></td>
  	<td><code>RrdExportDef def = <br /> new RrdExportDef(1000111222L, 1000222333L);</code></td>
  </tr>
  <tr>
  	<td><code>DEF:xval=test.rrd:x:AVERAGE</code></td>
  	<td><code>def.datasource("xval", "test.rrd", "x", "AVERAGE");</code></td>
  </tr>  
  <tr>
  	<td><code>XPORT:xval:"X values"</code></td>
  	<td><code>def.export("xval", "X values");</code></td>
  </tr>    
  <tr>
  	<td><code>--maxrows 100</code></td>
  	<td><code>RrdExport export = new RrdExport(def);<br />
ExportData data = export.fetch(100);</code></td>
  </tr>    
  <tr>
  	<td><code>[Enter]</code></td>
  	<td><code>System.out.println(data.exportXml());</code></td>
  </tr>      
  <tr> 
    <td bgcolor="#FFFF99" colspan="2">
<p><strong>TUNE<font color="#FF0000">***</font></strong></p></td>
  </tr>
  <tr> 
    <td><code>rrdtool tune file.rrd<br />
--heartbeat input:600&nbsp;</code></td>
    <td><code>RrdToolkit toolkit = RrdToolkit.getInstance();<br />
toolkit.setDsHeartbeat("file.rrd", "input", 600);</code></td>
  </tr>
    <tr> 
    <td><code>rrdtool tune file.rrd<br />
--maximum input:10000</code></td>
    <td><code>RrdToolkit toolkit = RrdToolkit.getInstance();<br />
toolkit.setDsMaxValue("file.rrd", "input", 10000, false);</code></td>
  </tr>
</tbody>
</table>
<p>Simple, isn't it?</p>
<p><code><font color="#FF0000"><b>(*)</b></font></code> Java months are zero based.<br />
  <code><font color="#FF0000"><b>(**)</b></font></code> PNG format should be your 
  first choice. However, JRobin supports GIF and JPEG formats too.<br />
<strong><font face="Courier New" color="#FF0000" size="2">(***)</font></strong> JRobin's RRDToolkit class is not fully compatible with <em>rrdtool tune</em> command 
  but has some interesting features (to add/remove datasource/archive for example) that cannot be found in RRDTool.&nbsp;</p>

<!-- footer -->

<p><a href="#">Back to the top</a></p>
<p>Copyright &copy; 2003, 2004 Sasa Markovic & Arne Vandamme. All Rights Reserved.</p>
<p><a href="http://www.bytemark-hosting.co.uk/r/jrobin" alt="Bytemark Hosting"><img src="../images/misc/bytemark-transparent.gif" width="200" height="25" border="0"></a></p>
</td>
</tr>
</tbody>
</table>
</body>
</html>