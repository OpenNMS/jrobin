<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_02) on Fri Jul 30 13:01:06 CEST 2004 -->
<TITLE>
RrdDbPool
</TITLE>

<META NAME="keywords" CONTENT="org.jrobin.core.RrdDbPool class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="RrdDbPool";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/jrobin/core/RrdDef.html" title="class in org.jrobin.core"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RrdDbPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.jrobin.core</FONT>
<BR>
Class RrdDbPool</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>org.jrobin.core.RrdDbPool</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>RrdDbPool</B><DT>extends java.lang.Object<DT>implements java.lang.Runnable</DL>

<P>
Class to represent the pool of open RRD files.<p>

 To open already existing RRD file with JRobin, you have to create a
 <A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core"><CODE>RrdDb</CODE></A> object by specifying RRD file path
 as constructor argument. This operation can be time consuming
 especially with large RRD files with many datasources and
 several long archives.<p>

 In a multithreaded environment you might probably need a reference to the
 same RRD file from two different threads (RRD file updates are performed in
 one thread but data fetching and graphing is performed in another one). To make
 the RrdDb construction process more efficient it might be convenient to open all
 RRD files in a centralized place. That's the purpose of RrdDbPool class.<p>

 How does it work? The typical usage scenario goes like this:<p>

 <pre>
 // obtain instance to RrdDbPool object
 RrdDbPool pool = RrdDbPool.getInstance();

 // request a reference to RrdDb object
 String path = "some_relative_or_absolute_path_to_any_RRD_file";
 RrdDb rrdDb = RrdDbPool.requestRrdDb(path);

 // reference obtained, do whatever you want with it...
 ...
 ...

 // once you don't need the reference, release it.
 // DO NOT CALL rrdDb.close() - files no longer in use are eventually closed by the pool
 pool.release(rrdDb);
</pre>

 It's that simple. When the reference is requested for
 the first time, RrdDbPool will open the RRD file
 for you and make some internal note that the RRD file is used only once. When the reference
 to the same file (same RRD file path) is requested for the second time, the same RrdDb
 reference will be returned, and its usage count will be increased by one. When the
 reference is released its usage count will be decremented by one.<p>

 When the reference count drops to zero, RrdDbPool will not close the underlying
 RRD file immediatelly. Instead of it, it will be marked as 'eligible for closing'.
 If someone request the same RRD file again (before it gets closed), the same
 reference will be returned again.<p>

 RrdDbPool has a 'garbage collector' which runs in a separate
 thread and gets activated only when the number of RRD files kept in the
 pool is too big (greater than number returned from <A HREF="../../../org/jrobin/core/RrdDbPool.html#getCapacity()"><CODE>getCapacity()</CODE></A>).
 Only RRD files with a reference count equal to zero
 will be eligible for closing. Unreleased RrdDb references are never invalidated.
 RrdDbPool object keeps track of the time when each RRD file
 becomes eligible for closing so that the oldest RRD file gets closed first.<p>

 Initial RrdDbPool capacity is set to <A HREF="../../../org/jrobin/core/RrdDbPool.html#INITIAL_CAPACITY"><CODE>INITIAL_CAPACITY</CODE></A>. Use <A HREF="../../../org/jrobin/core/RrdDbPool.html#setCapacity(int)"><CODE>setCapacity(int)</CODE></A> method to
 change it at any time.<p>

 <b>WARNING:</b>Never use close() method on the reference returned from the pool.
 When the reference is no longer needed, return it to the pool with the
 <A HREF="../../../org/jrobin/core/RrdDbPool.html#release(org.jrobin.core.RrdDb)"><CODE>release()</CODE></A> method.<p>

 However, you are not forced to use RrdDbPool methods to obtain RrdDb references
 to RRD files, 'ordinary' RrdDb constructors are still available. But RrdDbPool class
 offers serious performance improvement especially in complex applications with many
 threads and many simultaneously open RRD files.<p>

 The pool is thread-safe.<p>

 <b>WARNING:</b> The pool cannot be used to manipulate RrdDb objects
 with <A HREF="../../../org/jrobin/core/RrdBackend.html" title="class in org.jrobin.core"><CODE>backends</CODE></A> different from default.<p>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#INITIAL_CAPACITY">INITIAL_CAPACITY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constant to represent the maximum number of internally open RRD files
 which still does not force garbage collector (the process which closes RRD files) to run.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#dump()">dump</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the internal state of the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#finalize()">finalize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#getCapacity()">getCapacity</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns maximum number of internally open RRD files
 which still does not force garbage collector to run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../org/jrobin/core/RrdDbPool.html" title="class in org.jrobin.core">RrdDbPool</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an instance to RrdDbPool object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#getPoolEfficency()">getPoolEfficency</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates pool's efficency ratio.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#getPoolHitsCount()">getPoolHitsCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of RRD requests served from the internal pool of open RRD files</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#getPoolRequestsCount()">getPoolRequestsCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the total number of RRD requests successfully served by this pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#release(org.jrobin.core.RrdDb)">release</A></B>(<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A>&nbsp;rrdDb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method used to report that the reference to a RRD file is no longer needed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#requestRrdDb(org.jrobin.core.RrdDef)">requestRrdDb</A></B>(<A HREF="../../../org/jrobin/core/RrdDef.html" title="class in org.jrobin.core">RrdDef</A>&nbsp;rrdDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a reference to a new RRD file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#requestRrdDb(java.lang.String)">requestRrdDb</A></B>(java.lang.String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a reference to an existing RRD file with the specified path.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#requestRrdDb(java.lang.String, java.lang.String)">requestRrdDb</A></B>(java.lang.String&nbsp;path,
             java.lang.String&nbsp;xmlPath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a reference to a new RRD file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#reset()">reset</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clears the internal state of the pool entirely.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method runs garbage collector in a separate thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/jrobin/core/RrdDbPool.html#setCapacity(int)">setCapacity</A></B>(int&nbsp;capacity)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets maximum number of internally open RRD files
 which still does not force garbage collector to run.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="INITIAL_CAPACITY"><!-- --></A><H3>
INITIAL_CAPACITY</H3>
<PRE>
public static final int <B>INITIAL_CAPACITY</B></PRE>
<DL>
<DD>Constant to represent the maximum number of internally open RRD files
 which still does not force garbage collector (the process which closes RRD files) to run.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#org.jrobin.core.RrdDbPool.INITIAL_CAPACITY">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../../org/jrobin/core/RrdDbPool.html" title="class in org.jrobin.core">RrdDbPool</A> <B>getInstance</B>()</PRE>
<DL>
<DD>Returns an instance to RrdDbPool object. Only one such object may exist in each JVM.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Instance to RrdDbPool object.</DL>
</DD>
</DL>
<HR>

<A NAME="requestRrdDb(java.lang.String)"><!-- --></A><H3>
requestRrdDb</H3>
<PRE>
public <A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A> <B>requestRrdDb</B>(java.lang.String&nbsp;path)
                   throws java.io.IOException,
                          <A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></PRE>
<DL>
<DD>Returns a reference to an existing RRD file with the specified path.
 If the file is already open in the pool, existing reference to it will be returned.
 Otherwise, the file is open and a newly created reference to it is returned.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - Relative or absolute path to a RRD file.
<DT><B>Returns:</B><DD>Reference to a RrdDb object (RRD file).
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O error.
<DD><CODE><A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></CODE> - Thrown in case of JRobin specific error.</DL>
</DD>
</DL>
<HR>

<A NAME="requestRrdDb(java.lang.String, java.lang.String)"><!-- --></A><H3>
requestRrdDb</H3>
<PRE>
public <A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A> <B>requestRrdDb</B>(java.lang.String&nbsp;path,
                          java.lang.String&nbsp;xmlPath)
                   throws java.io.IOException,
                          <A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></PRE>
<DL>
<DD>Returns a reference to a new RRD file. The new file will have the specified
 relative or absolute path, and its contents will be provided from the specified
 XML file (RRDTool comaptible).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - Relative or absolute path to a new RRD file.<DD><CODE>xmlPath</CODE> - Relative or absolute path to an existing XML dump file (RRDTool comaptible)
<DT><B>Returns:</B><DD>Reference to a RrdDb object (RRD file).
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O error.
<DD><CODE><A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></CODE> - Thrown in case of JRobin specific error.</DL>
</DD>
</DL>
<HR>

<A NAME="requestRrdDb(org.jrobin.core.RrdDef)"><!-- --></A><H3>
requestRrdDb</H3>
<PRE>
public <A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A> <B>requestRrdDb</B>(<A HREF="../../../org/jrobin/core/RrdDef.html" title="class in org.jrobin.core">RrdDef</A>&nbsp;rrdDef)
                   throws java.io.IOException,
                          <A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></PRE>
<DL>
<DD>Returns a reference to a new RRD file. The new file will be created based on the
 definition contained in a RrdDef object.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rrdDef</CODE> - RRD definition object
<DT><B>Returns:</B><DD>Reference to a RrdDb object (RRD file).
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O error.
<DD><CODE><A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></CODE> - Thrown in case of JRobin specific error.</DL>
</DD>
</DL>
<HR>

<A NAME="release(org.jrobin.core.RrdDb)"><!-- --></A><H3>
release</H3>
<PRE>
public void <B>release</B>(<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core">RrdDb</A>&nbsp;rrdDb)
             throws java.io.IOException,
                    <A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></PRE>
<DL>
<DD>Method used to report that the reference to a RRD file is no longer needed. File that
 is no longer needed (all references to it are released) is marked 'eligible for
 closing'. It will be eventually closed by the pool when the number of open RRD files
 becomes too big. Most recently released files will be closed last.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rrdDb</CODE> - Reference to RRD file that is no longer needed.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O error.
<DD><CODE><A HREF="../../../org/jrobin/core/RrdException.html" title="class in org.jrobin.core">RrdException</A></CODE> - Thrown in case of JRobin specific error.</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD>This method runs garbage collector in a separate thread. If the number of
 open RRD files kept in the pool is too big (greater than number
 returned from <A HREF="../../../org/jrobin/core/RrdDbPool.html#getCapacity()"><CODE>getCapacity()</CODE></A>), garbage collector will try
 to close and remove RRD files with a reference count equal to zero.
 Never call this method directly.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>run</CODE> in interface <CODE>java.lang.Runnable</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="finalize()"><!-- --></A><H3>
finalize</H3>
<PRE>
protected void <B>finalize</B>()
                 throws java.io.IOException</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="reset()"><!-- --></A><H3>
reset</H3>
<PRE>
public void <B>reset</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>Clears the internal state of the pool entirely. All open RRD files are closed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O related error.</DL>
</DD>
</DL>
<HR>

<A NAME="dump()"><!-- --></A><H3>
dump</H3>
<PRE>
public java.lang.String <B>dump</B>()
                      throws java.io.IOException</PRE>
<DL>
<DD>Returns the internal state of the pool. Useful for debugging purposes.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Internal pool state (list of open RRD files, with the number of usages for
 each one).
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown in case of I/O error.</DL>
</DD>
</DL>
<HR>

<A NAME="getCapacity()"><!-- --></A><H3>
getCapacity</H3>
<PRE>
public int <B>getCapacity</B>()</PRE>
<DL>
<DD>Returns maximum number of internally open RRD files
 which still does not force garbage collector to run.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Desired nuber of open files held in the pool.</DL>
</DD>
</DL>
<HR>

<A NAME="setCapacity(int)"><!-- --></A><H3>
setCapacity</H3>
<PRE>
public void <B>setCapacity</B>(int&nbsp;capacity)</PRE>
<DL>
<DD>Sets maximum number of internally open RRD files
 which still does not force garbage collector to run.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>capacity</CODE> - Desired number of open files to hold in the pool</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolEfficency()"><!-- --></A><H3>
getPoolEfficency</H3>
<PRE>
public double <B>getPoolEfficency</B>()</PRE>
<DL>
<DD>Calculates pool's efficency ratio. The ratio is obtained by dividing the number of
 RrdDb requests served from the internal pool of open RRD files
 with the number of total RrdDb requests.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Pool's efficiency ratio as a double between 1 (best) and 0 (worst). If no RrdDb reference
 was ever requested, 1 would be returned.</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolHitsCount()"><!-- --></A><H3>
getPoolHitsCount</H3>
<PRE>
public int <B>getPoolHitsCount</B>()</PRE>
<DL>
<DD>Returns the number of RRD requests served from the internal pool of open RRD files
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The number of pool "hits".</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolRequestsCount()"><!-- --></A><H3>
getPoolRequestsCount</H3>
<PRE>
public int <B>getPoolRequestsCount</B>()</PRE>
<DL>
<DD>Returns the total number of RRD requests successfully served by this pool.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Total number of RRD requests</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/jrobin/core/RrdDb.html" title="class in org.jrobin.core"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/jrobin/core/RrdDef.html" title="class in org.jrobin.core"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RrdDbPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
